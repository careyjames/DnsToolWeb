function startStatusCycle(e){const t=e.querySelector(".loading-status");if(!t)return;const n=t.querySelectorAll("span");if(0===n.length)return;let o=0;n.forEach(function(e){e.classList.remove("active")}),n[0].classList.add("active"),setInterval(function(){n[o].classList.remove("active"),o=(o+1)%n.length,n[o].classList.add("active")},2500);const i=document.getElementById("loadingTimer"),s=document.getElementById("loadingNote"),a=Date.now();i&&setInterval(function(){const e=Math.floor((Date.now()-a)/1e3);i.textContent=e+"s"},1e3),s&&setTimeout(function(){s.style.opacity="1"},4e3)}function isValidDomain(e){if(!e)return!1;const t=e.replace(/\.$/,"");if(t.length>253||0===t.length)return!1;const n=t.split(".");if(n.length<2)return!1;for(const e of n){if(0===e.length||e.length>63)return!1;if(e.startsWith("-")||e.endsWith("-"))return!1}const o=n[n.length-1];if(/^\d+$/.test(o))return!1;if(!/[^\u0020-\u007F]/.test(t))for(const e of n)if(!/^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?$/.test(e))return!1;return!0}function resetCopyBtn(e){e.innerHTML='<i class="fas fa-copy"></i>',e.classList.remove("copied")}function handleCopyResult(e,t){e.innerHTML=t?'<i class="fas fa-check"></i>':'<i class="fas fa-times"></i>',t&&e.classList.add("copied"),setTimeout(function(){resetCopyBtn(e)},1500)}function createCopyHandler(e,t){return function(n){n.stopPropagation();let o="";e.childNodes.forEach(function(e){e===t||e.classList?.contains("copy-btn")||(o+=e.textContent)}),o=o.trim(),navigator.clipboard.writeText(o).then(function(){handleCopyResult(t,!0)}).catch(function(){handleCopyResult(t,!1)})}}"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(function(){}),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("domainForm"),t=document.getElementById("domain"),n=document.getElementById("analyzeBtn");e&&t&&n&&(t.addEventListener("input",function(){const e=this.value.trim(),t=""===e||isValidDomain(e);e&&!t?(this.classList.add("is-invalid"),n.disabled=!0):(this.classList.remove("is-invalid"),n.disabled=!1)}),e.addEventListener("submit",function(e){const o=t.value.trim().toLowerCase();if(t.value=o,!o)return e.preventDefault(),void t.classList.add("is-invalid");if(!isValidDomain(o))return e.preventDefault(),void t.classList.add("is-invalid");const i=document.getElementById("loadingOverlay"),s=document.getElementById("loadingDomain");i&&(s&&(s.textContent=o),i.classList.remove("d-none"),startStatusCycle(i)),n.textContent="";const a=document.createElement("i");a.className="fas fa-spinner fa-spin me-2",n.appendChild(a),n.appendChild(document.createTextNode("Analyzing...")),n.disabled=!0,document.body.classList.add("loading")}),t.addEventListener("focus",function(){this.classList.remove("is-invalid")})),document.querySelectorAll(".alert-dismissible:not(.alert-persistent)").forEach(function(e){setTimeout(function(){bootstrap.Alert.getOrCreateInstance(e).close()},5e3)}),document.querySelectorAll(".alert-dismissible .btn-close").forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=e.closest(".alert");if(n)try{bootstrap.Alert.getOrCreateInstance(n).close()}catch(e){n.remove()}})}),document.querySelectorAll('a[href^="#"]').forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.href.substring(this.href.indexOf("#")));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})}),document.querySelectorAll(".code-block").forEach(function(e){e.style.cursor="pointer",e.title="Click to copy";const t=document.createElement("button");t.type="button",t.className="copy-btn",t.setAttribute("aria-label","Copy to clipboard"),t.innerHTML='<i class="fas fa-copy"></i>',e.appendChild(t);const n=createCopyHandler(e,t);t.addEventListener("click",n),e.addEventListener("click",n)})});const allFixesCollapse=document.getElementById("allFixesCollapse");if(allFixesCollapse){const e=document.querySelector('[data-bs-target="#allFixesCollapse"]');if(e){const t=Array.from(e.childNodes).map(function(e){return e.cloneNode(!0)});allFixesCollapse.addEventListener("shown.bs.collapse",function(){e.textContent="";const t=document.createElement("i");t.className="fas fa-chevron-up me-1",e.appendChild(t),e.appendChild(document.createTextNode("Show fewer"))}),allFixesCollapse.addEventListener("hidden.bs.collapse",function(){e.textContent="",t.forEach(function(t){e.appendChild(t.cloneNode(!0))})})}}