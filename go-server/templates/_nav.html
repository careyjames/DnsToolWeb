{{define "nav"}}
<a href="#main-content" class="u-skip-link">Skip to main content</a>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark" aria-label="Main navigation">
    <div class="container">
        <a class="navbar-brand" href="/">
            <img src="/static/icons/icon-192x192.png" width="24" height="24" alt="" class="me-2 u-valign-n3 rounded-circle" aria-hidden="true">DNS Tool <span class="nav-version-badge ms-1">v{{.AppVersion}}</span>
            {{if .MaintenanceNote}}<span class="badge ms-2 u-maintenance-tag"><i class="fas fa-wrench me-1" aria-hidden="true"></i>{{.MaintenanceNote}}</span>{{end}}
        </a>
        <button class="btn btn-link u-covert-toggle p-0 ms-2" type="button" id="covertToggle" title="Covert Recon Mode â€” adversarial lens for offensive awareness" aria-label="Toggle Covert Recon Mode">
            <i class="fas fa-biohazard" aria-hidden="true"></i>
        </button>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link{{if eq .ActivePage "home"}} active{{end}}" href="/">
                        <i class="fas fa-search me-1" aria-hidden="true"></i>Analyze
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link{{if eq .ActivePage "investigate"}} active{{end}}" href="/investigate">
                        <i class="fas fa-route me-1" aria-hidden="true"></i>IP Intelligence
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link{{if eq .ActivePage "email-header"}} active{{end}}" href="/email-header">
                        <i class="fas fa-envelope me-1" aria-hidden="true"></i>Email Header
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link{{if eq .ActivePage "history"}} active{{end}}" href="/history">
                        <i class="fas fa-history me-1" aria-hidden="true"></i>History
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link{{if eq .ActivePage "stats"}} active{{end}}" href="/stats">
                        <i class="fas fa-chart-bar me-1" aria-hidden="true"></i>Statistics
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link{{if eq .ActivePage "sources"}} active{{end}}" href="/sources">
                        <i class="fas fa-diagram-project me-1" aria-hidden="true"></i>Sources
                    </a>
                </li>
                {{if .GoogleAuthEnabled}}
                <li class="nav-item ms-lg-2">
                    {{if .Authenticated}}
                    <div class="dropdown">
                        <button class="nav-link dropdown-toggle btn btn-link" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-shield me-1" aria-hidden="true"></i>{{.UserName}}
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark">
                            {{if eq .UserRole "admin"}}
                            <li><span class="dropdown-item-text text-info small"><i class="fas fa-shield me-1" aria-hidden="true"></i>Administrator</span></li>
                            <li><a class="dropdown-item" href="/ops"><i class="fas fa-tachometer-alt me-1" aria-hidden="true"></i>Admin Dashboard</a></li>
                            <li><hr class="dropdown-divider"></li>
                            {{end}}
                            <li><a class="dropdown-item" href="/dossier"><i class="fas fa-briefcase me-1" aria-hidden="true"></i>Intelligence Reports</a></li>
                            <li><a class="dropdown-item" href="/zone"><i class="fas fa-upload me-1" aria-hidden="true"></i>Zone File Import</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/auth/logout"><i class="fas fa-arrow-right me-1" aria-hidden="true"></i>Sign Out</a></li>
                        </ul>
                    </div>
                    {{else}}
                    <a class="nav-link" href="/auth/login">
                        <i class="fas fa-key me-1" aria-hidden="true"></i>Sign In
                    </a>
                    {{end}}
                </li>
                {{end}}
            </ul>
        </div>
    </div>
</nav>
{{end}}
